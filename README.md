# Description

When you use a crypto library (e.g. OpenSSL, WolfSSL, MbedTLS, etc...) for a particular crypto operation
(e.g. RSA encryption, RSA signature, etc...) there is no doubt that you parse a crypto object
(e.g. RSA private/public key, DH parameters, etc..) before performing your crypto operation.
Most of the available and the well-known crypto libraries use dynamic memory allocation when
parsing the crypto objects. Not only that but, they depend on the C standard library as well.
In deeply embedded environments, it is not possible to perform dynamic memory allocation and
the C standard library is not available.

That's why I decided to implement a tiny crypto parser which uses only the stack, doesn't depend
on any external library (not even the C standard library!), written in native C and which is
suitable for deeply embedded environments.

# Supported Crypto Objects

- X.509 certificates in DER format
- RSA PKCS1 in DER format
- RSA PKCS8 unencrypted in DER format
- DH parameters in DER format
- DSA parameters in DER format

# Build

Create a folder for the build

```shell
mkdir build
```

Generate a Makefile file with cmake

```shell
cd build
cmake ..
```

Build the library and the command line tool

```shell
make
```

To cross compile, the cross compiler may be set with the following cmake option:

```shell
cmake -D C_CROSS_COMPILER=<path/to/cross/compiler> ..
```

To disable building the command line tool use the following cmake option:

```shell
cmake -D CMD_LINE_TOOL=NO ..
```

**WARNING** : The command line tool uses the C standard Library. Make sure that you have the C standard library if the command line tool is not disabled. 

**INFO** : If the command line tool is disabled, The C standard library is not needed as the library is idependent of external and third party libraries.

# Use The Crypto Parser Command Line Tool

```
usage:
crypto_parser -o <x509Cert|rsaPubKey|rsaPrivKey|dhParam|dsaParam> -f <file.der>
-o   specify the crypto object type, it could be one of the following values
     x509Cert|rsaPubKey|rsaPrivKey|dhParam|dsaParam
-f   specify the file to parse in DER format
```

Output example generated by the command line tool parsing VeriSign's self signed Certificate:

```
Certificate:
	 Version:
		 3
	 Serial Number:
		 2F:80:FE:23:8C:0E:22:0F:48:67:12:28:91:87:AC:B3:
	 Signature Algorithm:
		 ECDSA_SHA2
	 Issuer:
		 Country (C) : US
		 State or Province (ST) : 
		 Organization (O) : VeriSign, Inc.
		 Common Name (CN) : VeriSign Class 3 Public Primary Certification Authority - G4
	 Validity:
		 Not Valid before : 2007/11/05
		 Not Valid After : 2038/01/18
	 Subject:
		 Country (C) : US
		 State or Province (ST) : 
		 Organization (O) : VeriSign, Inc.
		 Common Name (CN) : VeriSign Class 3 Public Primary Certification Authority - G4
	 Public Key Algorithm: ECDSA
		 04:A7:56:7A:7C:52:DA:64:9B:0E:2D:5C:D8:5E:AC:92:3D:FE:01:E6:
		 19:4A:3D:14:03:4B:FA:60:27:20:D9:83:89:69:FA:54:C6:9A:18:5E:
		 55:2A:64:DE:06:F6:8D:4A:3B:AD:10:3C:65:3D:90:88:04:89:E0:30:
		 61:B3:AE:5D:01:A7:7B:DE:7C:B2:BE:CA:65:61:00:86:AE:DA:8F:7B:
		 D0:89:AD:4D:1D:59:9A:41:B1:BC:47:80:DC:9E:62:C3:F9:
	 Signature:
		 30:65:02:30:66:21:0C:18:26:60:5A:38:7B:56:42:E0:A7:FC:36:84:
		 51:91:20:2C:76:4D:43:3D:C4:1D:84:23:D0:AC:D6:7C:35:06:CE:CD:
		 69:BD:90:0D:DB:6C:48:42:1D:0E:AA:42:02:31:00:9C:3D:48:39:23:
		 39:58:1A:15:12:59:6A:9E:EF:D5:59:B2:1D:52:2C:99:71:CD:C7:29:
		 DF:1B:2A:61:7B:71:D1:DE:F3:C0:E5:0D:3A:4A:AA:2D:A7:D8:86:2A:
		 DD:2E:10:

```
